(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7eb44ca0"],{2017:function(e,s,r){"use strict";var t=r("3b76"),o=r.n(t);o.a},"3b76":function(e,s,r){},"9ed6":function(e,s,r){"use strict";r.r(s);var t=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"login-container"},[e._m(0),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.showLogin,expression:"showLogin"}],staticClass:"login-wrap"},[r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[r("h3",{staticStyle:{"padding-left":"50%",color:"#ffffff"}},[e._v("登录")]),e._v(" "),r("el-form-item",{attrs:{prop:"username"}},[r("span",{staticClass:"svg-container"},[r("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),r("el-input",{ref:"username",attrs:{placeholder:"Username",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.username,callback:function(s){e.$set(e.loginForm,"username",s)},expression:"loginForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("span",{staticClass:"svg-container"},[r("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),r("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"Password",name:"password",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.handleLogin(s)}},model:{value:e.loginForm.password,callback:function(s){e.$set(e.loginForm,"password",s)},expression:"loginForm.password"}}),e._v(" "),r("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[r("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),e._v(" "),r("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(s){return s.preventDefault(),e.handleLogin(s)}}},[e._v("Login")]),e._v(" "),r("div",{staticClass:"tips"},[r("span",{staticStyle:{"margin-right":"20px"},on:{click:e.ToRegister}},[e._v(" 没有账号？马上注册 ")])])],1)],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.showRegister,expression:"showRegister"}],staticClass:"register-wrap"},[r("h3",{staticStyle:{"padding-left":"50%",color:"#ffffff"}},[e._v("注册")]),e._v(" "),r("el-form",{ref:"registerForm",staticClass:"register-form",attrs:{model:e.registerForm,rules:e.registerrules,"auto-complete":"on","label-position":"left"}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{model:{value:e.registerForm.name,callback:function(s){e.$set(e.registerForm,"name",s)},expression:"registerForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"pass"}},[r("el-input",{attrs:{type:e.passwordType,autocomplete:"off"},model:{value:e.registerForm.pass,callback:function(s){e.$set(e.registerForm,"pass",s)},expression:"registerForm.pass"}}),e._v(" "),r("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[r("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{attrs:{type:e.passwordType,autocomplete:"off"},model:{value:e.registerForm.checkPass,callback:function(s){e.$set(e.registerForm,"checkPass",s)},expression:"registerForm.checkPass"}}),e._v(" "),r("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[r("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"公司名称",prop:"company"}},[r("el-input",{model:{value:e.registerForm.company,callback:function(s){e.$set(e.registerForm,"company",e._n(s))},expression:"registerForm.company"}})],1),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.submitForm("registerForm")}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(s){return e.resetForm("registerForm")}}},[e._v("重置")]),e._v(" "),r("span",{on:{click:e.ToLogin}},[e._v("已有账号？马上登录")])],1)],1)])},o=[function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"title-container"},[r("h3",{staticClass:"title"},[e._v("智能互联云系统")])])}],i=r("c24f"),n={name:"Login",data:function(){var e=this,s=function(e,s,r){s.length<6?r(new Error("The password can not be less than 6 digits")):r()},r=function(e,s,r){if(!s)return r(new Error("公司名不能为空"))},t=function(s,r,t){r.length<6?t(new Error("密码不得少于6位")):(""!==e.registerForm.checkPass&&e.$refs.registerForm.validateField("checkPass"),t())},o=function(s,r,t){""===r?t(new Error("请再次输入密码")):r!==e.registerForm.pass?t(new Error("两次输入密码不一致!")):t()};return{showLogin:!0,showRegister:!1,loginForm:{username:"test",password:"1111"},loginRules:{password:[{required:!0,trigger:"blur",validator:s}]},loading:!1,passwordType:"password",redirect:void 0,registerForm:{name:"",pass:"",checkPass:"",company:""},registerrules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],pass:[{validator:t,trigger:"blur"}],checkPass:[{validator:o,trigger:"blur"}],company:[{validator:r,trigger:"blur"}]}}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick(function(){e.$refs.password.focus()})},handleLogin:function(){var e=this;this.$refs.loginForm.validate(function(s){if(!s)return console.log("error submit!!"),e.$message.error("登录错误，如未注册，请先进行注册！"),!1;e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then(function(){e.$router.push({path:e.redirect||"/"}),e.loading=!1}).catch(function(){e.loading=!1})})},ToRegister:function(){this.showRegister=!0,this.showLogin=!1},ToLogin:function(){this.showRegister=!1,this.showLogin=!0},submitForm:function(e){var s=this;Object(i["d"])(this.registerForm).then(function(r){console.log(r),200===r.code?(s.$message.success("注册成功"),s.resetForm(e),s.ToLogin()):"existed"===r.rsl?s.$message.error("此用户名已存在，注册不成功，请重试！"):s.$message.error("注册不成功，请重试！")})},resetForm:function(e){this.$refs[e].resetFields()}}},a=n,l=(r("2017"),r("d679"),r("2877")),c=Object(l["a"])(a,t,o,!1,null,"7080d32b",null);s["default"]=c.exports},d679:function(e,s,r){"use strict";var t=r("e0f5"),o=r.n(t);o.a},e0f5:function(e,s,r){}}]);